<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.Lql.SRTP.dao.WarehouseLayoutDao">
    <select id="getorderitemByPid" resultType="com.Lql.SRTP.entity.Orderitem">
        SELECT *
        FROM srtp_orderitem
        WHERE pid = #{pid}
    </select>
    <select id="getproductByPid" resultType="com.Lql.SRTP.entity.Product">
        SELECT *
        FROM srtp_product
        WHERE id = #{pid}
    </select>
    <select id="getAllproduct" resultType="com.Lql.SRTP.entity.Product">
        SELECT *
        FROM srtp_product
    </select>
    <select id="getshelvesBysid" resultType="com.Lql.SRTP.entity.Shelves">
        SELECT *
        FROM srtp_shelves
        WHERE id = #{sid}
    </select>
    <select id="getAllshelves" resultType="com.Lql.SRTP.entity.Shelves">
        SELECT *
        FROM srtp_shelves
    </select>
    <select id="gettimerest" resultType="com.Lql.SRTP.entity.Orderitem">
        SELECT *
        FROM srtp_orderitem
        where pmodifiedtime like #{time}
        order by pmodifiedtime desc limit 1
    </select>
    <update id="changeproduct">
        update srtp_product
        <set>

            iton=#{iton},
            itom=#{itom}

        </set>
        where id=#{pid}
    </update>
    <select id="gettogetheritem" resultType="com.Lql.SRTP.entity.Orderitem">
        SELECT *
        FROM srtp_orderitem
        where oid IN (SELECT oid
                      FROM srtp_orderitem
                      where oid IN (SELECT oid FROM srtp_orderitem WHERE pid = #{one})
                        and pid = #{two})
          and (pid = #{two} or pid = #{one})


        ORDER BY oid Desc
    </select>
    <update id="updatashelvesdis">
        update srtp_shelvesdis
        <set>
            <if test="num!=null">
                num1=#{num}
            </if>
        </set>
        where g1=#{pid1} and g2=#{pid2}
    </update>
    <select id="getshelvesdis" resultType="com.Lql.SRTP.entity.ShelvesDis">
        SELECT *
        FROM srtp_shelvesdis
        WHERE s1 = #{sid1}
          and s2 = #{sid2}
    </select>
    <select id="gethousebase" resultType="com.Lql.SRTP.entity.Housebase">
        SELECT *
        FROM srtp_housebase
        WHERE id = #{id}
    </select>
    <update id="changeshelvessv">
        update srtp_shelves
        <set>
            <if test="sv!=null">
                sv=#{sv}
            </if>
        </set>
        where id=#{sid}
    </update>


</mapper>
